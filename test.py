from protobuf import message_pb2
# import message_pb2
import gzip
from google.protobuf.json_format import MessageToDict
# hex来自上方的粘贴
hex = '081b10a0a392bed4f1cdd20e18b84520082a150a0d636f6d70726573735f747970651204677a69702ab9020a0f696d2d696e7465726e616c5f65787412a502696e7465726e616c5f7372633a707573687365727665727c7773735f707573685f726f6f6d5f69643a373137333436323933333832383232353832327c7773735f707573685f6469643a373137323832323939303731383235363634387c7773735f707573685f6c6f675f69643a313035353331303736373632323233303433327c7773735f66657463685f6d733a313637303230333333323039337c7773735f707573685f6d733a313637303230333333323132397c7773735f6d73675f747970653a727c777264735f6b76733a57656263617374526f6f6d52616e6b4d6573736167652d313637303230333332393037333131343930375f57656263617374526f6f6d53746174734d6573736167652d313637303230333332393035363632333835332a4e0a09696d2d637572736f721241742d313637303230333333323132395f722d373137333436383638383631303234303735375f642d315f752d315f682d315f6368642d5f6368752d5f7264632d312a170a06696d2d6e6f77120d313637303230333333323132392a190a0e696d2d6c6976655f637572736f721207642d315f752d31320270623a036d7367428c111f8b08000000000000ffd4987b6c53d71dc7736d93984b59ddbba1de65521785fd31313939e7dc77a46de441082e66560c84469aeeeee3c436f8117c9dc4446882400b1909342ba2854281201e85b1423ad41048a1ac42dba44d50a46a8f4eaad6d80e689d22cab6ae1b62b2e324247512c749ba2e7fdce8e49cf3fd9df37be4f7b997fc700949d56155538c48a5578938b161281e4c5d5b4296649ab09d3e73e8b35dffbc7d53a35f3bd0f997edb76fddd400b1e1d27d82facf57ade7df1b1ab8dcf10bb3ede2b5a1cb4f162e5e1eef391ebbb623de737cb0adcfb1956cf546228d465969692384257aa8698b2fd8e8d34ab450a05469c1015c0a01884200864776a5598928e1d248c8b06b41bbd21cb103003959438aa837008891a24a121255461311d25491d5351d03b5646323f67cbf211c0a7c970510700c048c78966825d725cd27ad4bf696e19b4d38842fe0294dcf943619382c7bc28a8e653f6ec67eb99993a150d218f4fc38d2e86fb687d48d25be80e2c1b4ada8081015dfa09f2a7e7ab0f3c4e0d9f6c4f9f644df692824fa4ec7f6ec499c3b76966823c8da11eb4c16d61b94a0a1f99bd411dbbc2c65300d0a2a9691f977af74c5de3a4d152cad4efdd00b8b970cff29d1d33ed07b24f66af7f0297a88026bfb021ba0893ee25d023c7588f8e1bcbaa49b90c9ba117d3e0bfd54d4e546654bda088aca909361a69bd34f143d01881bc459926c5f30e202db429a28be6f216f98ac16aadf44ae9fa5c7e568a03183ed31dd6c9c968b6e36ceca5e975a9ac59eda7cd29297f73daa3efd9bec36594dd411d37ca4ed98668e0e9c523347e76572dc37a7594fa5130f5cd873abed7627a05e5d6025a8030bc885f1639763c7f7c72e5eb4913451fcd0429e4abaf3b88974cfeeea1064babb7b76319a463437876614a58aa6db40de4c16ef3ba699fde7c8a4365995d5cd3602d30ae71a85c9eaf75bd96c9a58c0d4580e821b1f3f38f737539b29afc7b448f3e2208202cf4ad27dd36aa79b6d59bdb1bca2bcbcbc1caff6473de1cd3511a95c5ecffdc0d95ac3e0f5aa5653eee5239ce65c5db9cabd02571995b56103ac404a747d538573a5c263996b68560cb6f182d97ccffc3fecb2f7cc5f862e7bcf7c8098afce0398999c646246bc6821ba2de399ec379695c319e0ace085751bea5905d7805657a0050b153e6fc4b5a1fc59475da8ae3ad850efae726b58f5daabd6b9445e36aa78addee9e66a5a1baac3585f6d142e8df5bf146bef8cb7bf7477dbb1c4a19df157de187ceb0c9738b413262374ed52acf7884323959975b9647ef81515fbe5206e910d1cd4658faf2192c137cb0a9656c0caca7226facb7d970ee7d3a3a04a263223eecdc911f7cfef5dffc744c4bd7e9fa0767ecdfad19d0be777fefdd766dbafdefce4cae2c2af0c1dedd83d74b4e3b5a1a31d075d7211e16825a3a3948bf81953aecf0e44c8c81a03354e5111c40c6455a0282250155d10458ed3350568d3336eb6de9d587d889daafae8f1d587d8c7187707312f3d2373f9915340ee43abcd9d865c7a1ce4ce834fc6416e36d59e01721198c4421a727b48b26b0c729340f199e5f37d728ebbceff5f03cead4f7e9ecce63077e799cce69021a727b36c6077d130ecce15c3c1f94aa1e985738cd764c253e626cc3e37733dd67ca4d1d4a2b9867ca6b999da3009ece6bb440e8a1339d789bc1167d373bce2f1e9006f148301185de5f1afdd6438785f4891ddc1671db8def5dc0a9773ad2318f2699b5d0e6dad6aa8ee4dcdb55b587d22e77ed19df69ef94bd169ef995f26e6adfb6426ddc98e92917427a0d928eaaed958a144ebeb3608ab5ad7096b5d61975b9022eb377b9cbacb8b58ff4a5c8d85e09a48d88ded520debd5a3d5724d93d7bbd21100cd7551889dd9a1ae4afe68e629328cba61ec69f22b6159f32a9390ee0a505159c58e926e9a57c95d04f9741a686b43a1803ba2448c11dc554976d249dbb6b6ab3febfa741cf216bd7078fba3df02cac2889c50987a16db92cfd8e13389be6b83a7db06aebefcedae67c0a3d72f1eccafd9f38c8ba0b7b5bd3d2c43fe7131f9f5c78cad3370d88d378f9ca56731c94f316f3bb9fff5536f4e38cef593a9e3745aa8dd16ebcf7fb7ed83471d7b4d854baad654c72eec4bbcf093d8f367621d7d777775c57ab73b2e9bc92da314cee4fea919b13a820c848ac86108580024c4218517b9062c8a2a543262f8639fb973780198a5edb16b7fd1a6a91573a2dd43e4f51179370892b416e793166b1e9577c16c3e6bc9eb5e6e8350142428414e82406211a209ea5f66ea81d9fafb8fae7c103315da067a3b632fee183cf046fcc8f1a1a39d471d17cd64cb2c1221fd36c6b2888188d5194e53585d4512a7e80ac03a070455d15990391473f11e989be5965924c16c0c539573a03c45022c9278803846e0a0846813f5a999fac46cfd69ff5f0fc64c854fc67b9fbf7b626f7c5f7ffc95bdf1c3bbe728f488470d82a04ba2a84056d018110196c30256b1aa684894e62ff4b9599e83d0e76438abd04fa73c65e83951e4789e1125409ba9455481357efbc33ffcdb445ba82728abf5c1dea13bfb1f94d00b525327debf7af54f049d9f1a24ee7c7c6bc04417a406eff7bf73eea099b6a606ddfbfadfbd4fd00be9ae67c4b72f5b2bf22118e8ddf51d47aadbd5a69ef505902911077a77d127f79f1a6e4a148ed8212f00041886414062e4b05d8002c3f2222f8a3c0488050227c8ba1dca4da9190621c8029661116221cfcbdef47a81e5599e9358c422899535af6e97356f935d0eeb9a1dd28305450fcf259bdeb223265f3082c341c52f1b61adacb1c9f01a38dc8cc35b5b0c434e0ee5702814907d7ad9b0309218464422429c88d0d822dda797f112cf4124f082208c4df8439ee46608b86434055ee0114248922429b5a6014734af1c30cac65d7b6c7bc69980e191235b1a7159786b4b5837e44dcd46d9632dbf56096e4af7fb516f2209080c84ac0404791254797c2dc7f388113966f99335c47f010000ffff010000ffffa99c7fbbc91e0000'

data = bytes.fromhex(hex)
o = message_pb2.PushFrame()
o.ParseFromString(data)

payload = gzip.decompress(o.palyload)
r = message_pb2.Response()
r.ParseFromString(payload)
print(r)
e = r
messagelist = e.messages
for t in messagelist:
    o = t.payload
    message_ = ''
    if t.method == "WebcastLikeMessage":
        message_ = message_pb2.LikeMessage()
        message_.ParseFromString(o)
    elif t.method == "WebcastChatMessage":
        message_ = message_pb2.ChatMessage()
        message_.ParseFromString(o)
    elif t.method == "WebcastMemberMessage":
        message_ = message_pb2.MemberMessage()
        message_.ParseFromString(o)
    elif t.method == "WebcastSocialMessage":
        message_ = message_pb2.SocialMessage()
        message_.ParseFromString(o)
    elif t.method == "WebcastGiftMessage":
        message_ = message_pb2.GiftMessage()
        message_.ParseFromString(o)
    else:
        print(t.method)
    if message_:
        obj1 = MessageToDict(message_, preserving_proto_field_name=True)
        print(obj1)





